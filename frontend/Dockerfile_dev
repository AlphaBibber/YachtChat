FROM node:alpine as build-deps
ARG REACT_APP_SIGNAL_URL
ARG REACT_APP_SIGNAL_PORT
ARG REACT_APP_SPACES_URL
ARG VIRTUAL_PORT

WORKDIR /home/frontend

ENV REACT_APP_SPACES_URL=${REACT_APP_SPACES_URL}
ENV REACT_APP_SIGNAL_URL=${REACT_APP_SIGNAL_URL}
ENV REACT_APP_SIGNAL_PORT=${REACT_APP_SIGNAL_PORT}
EXPOSE ${VIRTUAL_PORT}
CMD yarn && yarn run start